// ============================================
// ğŸ“„ 2. src/app/(admin)/faq/page.tsx
// ============================================

'use client';

import { useState } from 'react';
import { Plus, Search, Sparkles } from 'lucide-react';
import Link from 'next/link';
import Button from '@/components/ui/Button/Button';
import FAQList from '@/components/faq/FAQList/FAQList';
import { FAQ } from '@/types/faq.types';
import styles from './faq-page.module.css';

const mockFAQs: FAQ[] = [
  {
    id: '1',
    question: 'ì œí’ˆ ì‚¬ìš©ë²•ì´ ê¶ê¸ˆí•´ìš”',
    answer: 'ì œí’ˆ ì‚¬ìš© ì„¤ëª…ì„œì˜ 3-5í˜ì´ì§€ë¥¼ ì°¸ê³ í•˜ì„¸ìš”. ì´ˆê¸° ì„¤ì •ì€ ì „ì›ì„ ì¼  í›„ ì„¤ì • ë²„íŠ¼ì„ 3ì´ˆê°„ ëˆ„ë¥´ë©´ ë©ë‹ˆë‹¤.',
    category: 'ì‚¬ìš©ë²•',
    tags: ['ì‚¬ìš©ë²•', 'ì´ˆê¸°ì„¤ì •'],
    productName: 'ì„¸íƒê¸° WM-2024',
    status: 'published',
    isAutoGenerated: false,
    viewCount: 234,
    helpfulCount: 189,
    createdAt: new Date('2025-01-10'),
    updatedAt: new Date('2025-01-10'),
    createdBy: 'ê´€ë¦¬ì',
  },
  {
    id: '2',
    question: 'ê³ ì¥ì´ ë‚¬ì–´ìš”',
    answer: 'ê³ ì¥ ì¦ìƒì— ë”°ë¼ ë‹¤ìŒê³¼ ê°™ì´ ì¡°ì¹˜í•˜ì„¸ìš”. 1) ì „ì›ì´ ì•ˆ ë“¤ì–´ì˜¤ëŠ” ê²½ìš° 2) ë¬¼ì´ ì•ˆ ë‚˜ì˜¤ëŠ” ê²½ìš° 3) ì†ŒìŒì´ ë°œìƒí•˜ëŠ” ê²½ìš°',
    category: 'ê³ ì¥/ìˆ˜ë¦¬',
    tags: ['ê³ ì¥', 'A/S'],
    productName: 'ì„¸íƒê¸° WM-2024',
    status: 'published',
    isAutoGenerated: true,
    viewCount: 187,
    helpfulCount: 156,
    createdAt: new Date('2025-01-15'),
    updatedAt: new Date('2025-01-15'),
    createdBy: 'AI',
  },
  {
    id: '3',
    question: 'A/SëŠ” ì–´ë–»ê²Œ ë°›ë‚˜ìš”?',
    answer: 'A/S ì‹ ì²­ì€ ê³ ê°ì„¼í„°(1588-1234) ë˜ëŠ” í™ˆí˜ì´ì§€ë¥¼ í†µí•´ ê°€ëŠ¥í•©ë‹ˆë‹¤. ë³´ì¦ê¸°ê°„ì€ ì œí’ˆ êµ¬ë§¤ì¼ë¡œë¶€í„° 1ë…„ì…ë‹ˆë‹¤.',
    category: 'A/S',
    tags: ['A/S', 'ë³´ì¦'],
    status: 'draft',
    isAutoGenerated: true,
    viewCount: 0,
    helpfulCount: 0,
    createdAt: new Date('2025-01-20'),
    updatedAt: new Date('2025-01-20'),
    createdBy: 'AI',
  },
];

export default function FAQPage() {
  const [searchQuery, setSearchQuery] = useState('');
  const [faqs] = useState<FAQ[]>(mockFAQs);
  const [statusFilter, setStatusFilter] = useState<'all' | 'published' | 'draft'>('all');

  const filteredFAQs = faqs.filter(faq => {
    const matchesSearch = 
      faq.question.toLowerCase().includes(searchQuery.toLowerCase()) ||
      faq.answer.toLowerCase().includes(searchQuery.toLowerCase());
    const matchesStatus = statusFilter === 'all' || faq.status === statusFilter;
    return matchesSearch && matchesStatus;
  });

  return (
    <div className={styles.page}>
      <div className={styles.header}>
        <div>
          <h1>FAQ ê´€ë¦¬</h1>
          <p className={styles.subtitle}>ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ì„ ê´€ë¦¬í•˜ì„¸ìš”</p>
        </div>
        <div className={styles.headerActions}>
          <Link href="/faq/auto-generate">
            <Button variant="secondary">
              <Sparkles size={20} />
              ìë™ ìƒì„±
            </Button>
          </Link>
          <Button variant="primary">
            <Plus size={20} />
            FAQ ì¶”ê°€
          </Button>
        </div>
      </div>

      <div className={styles.toolbar}>
        <div className={styles.searchWrapper}>
          <Search className={styles.searchIcon} size={20} />
          <input
            type="text"
            placeholder="FAQ ê²€ìƒ‰..."
            className={styles.searchInput}
            value={searchQuery}
            onChange={(e) => setSearchQuery(e.target.value)}
          />
        </div>

        <div className={styles.filters}>
          <button
            className={`${styles.filterButton} ${statusFilter === 'all' ? styles.active : ''}`}
            onClick={() => setStatusFilter('all')}
          >
            ì „ì²´
          </button>
          <button
            className={`${styles.filterButton} ${statusFilter === 'published' ? styles.active : ''}`}
            onClick={() => setStatusFilter('published')}
          >
            ê²Œì‹œë¨
          </button>
          <button
            className={`${styles.filterButton} ${statusFilter === 'draft' ? styles.active : ''}`}
            onClick={() => setStatusFilter('draft')}
          >
            ì„ì‹œì €ì¥
          </button>
        </div>
      </div>

      <div className={styles.stats}>
        <div className={styles.statCard}>
          <span className={styles.statValue}>{faqs.filter(f => f.status === 'published').length}</span>
          <span className={styles.statLabel}>ê²Œì‹œë¨</span>
        </div>
        <div className={styles.statCard}>
          <span className={styles.statValue}>{faqs.filter(f => f.isAutoGenerated).length}</span>
          <span className={styles.statLabel}>AI ìƒì„±</span>
        </div>
        <div className={styles.statCard}>
          <span className={styles.statValue}>{faqs.reduce((sum, f) => sum + f.viewCount, 0)}</span>
          <span className={styles.statLabel}>ì´ ì¡°íšŒìˆ˜</span>
        </div>
      </div>

      <FAQList faqs={filteredFAQs} />
    </div>
  );
}