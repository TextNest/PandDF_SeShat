# LOG
### 작성자 : ScatterRaven
### 작업 분야 : 백엔드 서폿

## 작업 내용
**2025.10.20 ~ 2025.10.24**
|항목|결과|항목|비고|
|-|-|-|-|
|이미지 OCR : PaddleOCR|작업 취소|이미지 내 텍스트 추출|정규화 필요|
|이미지 OCR : PaddleOCR|작업 취소|이미지 내 텍스트 정규화|그룹화를 위해 좌표 정규화 필요|
|이미지 OCR : PaddleOCR|작업 취소|이미지 내 좌표 정규화|완료|
|이미지 처리| | | |
|검증 : 모델 이미지 처리| | | |
|검증 : 모델 이미지 기반 설명| | | |
|검증 : 모델 이미지 출력| | | |

## 작업 노트
목표 : **PDF 내 이미지(표, 그래프, 주의문구 블록 등)를 탐지·추출하고, 좌표/섹션 정보를 함께 저장하는 모듈 구축**

1. OCR 처리 생략
- 처리해야 하는 내용에 비해 과도하게 지연되고 있으며, 이로 인해 다른 필수 작업도 차질이 생기고 있음
- 텍스트 처리를 이동인님께서 완성도 높게 구축하였으니, 현시점에서 불필요한 작업이라 판단/작업 취소 처리

2. PDF 이미지 처리 모듈 설계
- LayoutParser 또는 pdfplumber의 layout 분석 결과를 이용
- 이미지(figure), 표(table), 주의문(warning/caution) 블록을 감지
- 각각의 블록별 페이지, 좌표(x0, y0, x1, y1), 타입, 참조 태그를 JSON 형태로 저장

3. 참조 구조 정의
- 텍스트 청크와 마찬가지로 이미지·표도 **“지식 단위”**로서 임베딩될 수 있게 설계해야 함
- (예: "type": "figure", "ref_text": "그림 2-1. 회로 연결도", "coords": [...] 형태)
- 나중에 RAG 단계에서 metadata를 통해 관련 질의 시 해당 표나 그림을 LLM이 인용하거나 표시할 수 있도록 연결하는 것을 고려해야 함

4. 시각 참조 기능 구상
- LLM이 “그림 3을 참고하세요.” 같은 응답을 할 때 coords 또는 page_num을 통해 원본 이미지 썸네일을 챗봇이 표시 가능하도록 설계
- (예: <img src="page_3_figure_1.png"> 식으로 프론트에서 렌더링)

5. 포맷 예시
```json
[
  {
    "page": 5,
    "type": "table",
    "coords": [120, 300, 480, 500],
    "caption": "표 2-3. 주요 스펙 비교",
    "ref_id": "tbl_2_3"
  },
  {
    "page": 7,
    "type": "figure",
    "coords": [100, 200, 500, 650],
    "bbox": [x0, y0, x1, y1],
    "caption": "그림 3-1. 배선도",
    "ref_id": "fig_3_1"
  }
]
```